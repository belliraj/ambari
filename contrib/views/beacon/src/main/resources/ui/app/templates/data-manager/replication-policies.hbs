{{!
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* "License"); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
}}
{{#if error}}
<div class="alert alert-danger">
  {{error.message}}
</div>
{{/if}}
{{#if creationInProgress}}
<div class="loading-container">
  {{spin-spinner lines=13 length=20 width=10 top=250}}
</div>
{{else}}
{{#if (and (gt model.policies.meta.totalResults 0)(not createPolicyShown))}}
  {{#policy-table beaconSourceCluster=model.beaconSourceCluster
    policies=model.policies createPolicy="createPolicy"
    schedule="schedule" suspend="suspend" resume="resume" delete="delete"
    goToPage="goToPage" offset=offset orderBy=orderBy
    sortOrder=sortOrder numResults=numResults onError="onError" type='source'}}{{/policy-table}}
{{else if (not createPolicyShown)}}
<div class="no-replication-policy">
  <span>No replication policies created.<br/>Create first replication policy.</span>
  <button type="button" class="btn btn-success" name="button" {{action 'createPolicy'}}>CREATE REPLICATION POLICY</button>
</div>
{{/if}}
{{#if createPolicyShown}}
{{#create-replication-policy beaconSourceCluster=model.beaconSourceCluster
  pairedClusters=model.pairedClusters savePolicy="savePolicy"
  userInfo=model.userInfo onError="onError"}}{{/create-replication-policy}}
{{/if}}
{{/if}}
